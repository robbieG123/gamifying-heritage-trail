<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
        <title>Dundee Ghost Trail</title>
        <link rel="stylesheet" href="style.css">
        <link href='https://fonts.googleapis.com/css?family=Averia Sans Libre' rel='stylesheet' href="style.css">
        <link href='https://fonts.googleapis.com/css?family=Jockey One' rel='stylesheet' href="style.css">
        <link rel="icon" href="./favicon.ico" type="image/x-icon">
      </head>
  <body>
    <main>
        <div class="container text-center">
            <!-- https://simplestepscode.com/javascript-quiz-tutorial/ -->
            <div id="quiz"></div>
        
        <div class="row" style=" margin-top:0; margin-bottom: 10px;">
            <div id="catch" style="display:block;bottom:0%">
                <div class="col" id="box" >
                    <h1>SUBMIT</h1>
                </div>
            </div>
        </div>
    </div>
        <div id="myModal" class="modal fade" style="color:black;">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Correct!</h5>
                    </div>
                    <div class="modal-body">
                        <p>You answered the ghost's question correctly and now you have officially caught it! You can view your progress in the caught ghost page</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" onclick="addToCaught()" class="btn btn-primary">Return to Map</button>
                    </div>
                </div>
            </div>
        </div>
        
    </main>
  </body>
</html>
<script>
    //var quiz = sessionStorage.getItem("quiz");
    var locationNum = sessionStorage.getItem("locationNum");
    console.log(locationNum);
    var question = sessionStorage.getItem("question");
    var ans1 = sessionStorage.getItem("ans1");
    var ans2 = sessionStorage.getItem("ans2");
    var ans3 = sessionStorage.getItem("ans3");
    var ans4 = sessionStorage.getItem("ans4");
    var correct = sessionStorage.getItem("correct");

    generateQuiz(question, ans1, ans2, ans3, ans4, correct);

    document.getElementById('catch').onclick = function(){
        checkResults()
    }



    function generateQuiz(question, ans1, ans2, ans3, ans4, correct){

        var output = []
        var answers = []
        

        // ...add an html radio button
        answers.push(
            '<label class="container" id="question">'
                + '<input type="radio" name="answer" value="1" id="1">'
                + '<span class ="checkmark"></span>'
                +  'A: '
                + ans1
            + '</label>' +
            '<label class="container" id="question">'
                + '<input type="radio" name="answer" value="2" id="2">'
                + '<span class ="checkmark"></span>'
                +  'B: '
                + ans2
            + '</label>' +
            '<label class="container" id="question">'
                + '<input type="radio" name="answer" value="3" id="3">'
                + '<span class ="checkmark"></span>'
                +  'C: '
                + ans3
            + '</label>' +
            '<label class="container" id="question">'
                + '<input type="radio" name="answer" value="4" id="4">'
                + '<span class ="checkmark"></span>'
                +  'D: '
                + ans4
            + '</label>'
        );

        output.push(
            '<div class="question">' + '<h2>' +question + '</h2>'+'</div>'
			+ '<div class="answers">' + answers.join('') + '</div>'  
        );

        document.getElementById("quiz").innerHTML = output.join('');
        
    }

        //addToCaught() adds the caught ghost to the GhostScreen to track how many ghosts have been caught
        function addToCaught(){
        //var locationNum = sessionStorage.getItem("locationNum"); //index of the most recently visited location
        var caughtLocations = sessionStorage.getItem("caughtLocations");
        //if(locationNum != null){
        var locationName = sessionStorage.getItem("locationName");
        console.log(locationName);
        sessionStorage.setItem("caughtLocations", caughtLocations + "/" +locationName);
        sessionStorage.setItem("quizComplete", true);
        window.location.assign("GhostTrailMapScreen.html");
       // }
    }

    function checkResults(){
        for (let i = 1; i<=4;i++){
            if(document.getElementById(i).checked) {
                if(i == correct){
                    $('#myModal').modal('show')
                    console.log("correct!");
                }
                else{
                    console.log("false!")
                    window.location.assign("CatchScreen.html");
                }
            }
        }
    }
    
</script>
